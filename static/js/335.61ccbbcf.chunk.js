"use strict";(self.webpackChunkmatch_control_ui=self.webpackChunkmatch_control_ui||[]).push([[335],{39354:function(e,n,i){i.d(n,{Z:function(){return f}});var t=i(1413),r=i(29439),a=i(97215),l=i(47313),s=i(60731),o=i.n(s),d={defaultColDef:{editable:!1,sortable:!0,filter:!0,resizable:!0}},c=(0,t.Z)((0,t.Z)({},d),{},{headerHeight:32,rowHeight:28}),u=o().namespace("agGrid/Settings"),h=(i(10421),i(46417)),f=(0,l.forwardRef)((function(e,n){var i=e.id,s=e.gridId,o=e.className,f=e.gridOptions,x=e.isLoading,m=e.rowData,p=e.context,Z=e.isCondensed,v=e.gridHeight,j=void 0===v?500:v,g=(0,l.useState)(),y=(0,r.Z)(g,2),C=y[0],w=y[1],b=(0,l.useCallback)((function(e){var n=e.api,i=e.columnApi,t=u.get(s);if(t){var r=t.columnState,a=t.columnGroupState;r&&i.applyColumnState({state:r,applyOrder:!0}),a&&i.setColumnGroupState(a)}else n.sizeColumnsToFit()}),[s]),S=(0,l.useMemo)((function(){return(0,t.Z)((0,t.Z)({},Z?c:d),f)}),[f,Z]),D=(0,l.useCallback)((function(e){var n=e.columnApi,i={columnState:n.getColumnState(),columnGroupState:n.getColumnGroupState()};u.set(s,i)}),[s]),k=(0,l.useMemo)((function(){return(0,t.Z)({onGridReady:function(e){var n=e.api,i=e.columnApi;s?b({api:n,columnApi:i}):n.sizeColumnsToFit(),w({api:n,columnApi:i})},onGridSizeChanged:function(e){var n=e.api;e.columnApi;s||n.sizeColumnsToFit()}},s?{onColumnResized:D,onColumnVisible:D,onColumnPinned:D,onColumnMoved:D,onColumnValueChanged:D,onColumnPivotChanged:D,onColumnPivotModeChanged:D,onColumnRowGroupChanged:D}:{})}),[s,D,b]);return(0,l.useEffect)((function(){n&&("function"===typeof n?n(C):n.current=C)}),[n,C]),(0,l.useEffect)((function(){x?null===C||void 0===C||C.api.showLoadingOverlay():null!==m&&void 0!==m&&m.length?null===C||void 0===C||C.api.hideOverlay():null===C||void 0===C||C.api.showNoRowsOverlay()}),[x,m,C]),(0,l.useEffect)((function(){var e=function(){null===C||void 0===C||C.api.sizeColumnsToFit()};return window.addEventListener("resize",e,!0),function(){window.removeEventListener("resize",e,!0)}}),[C]),(0,h.jsx)("div",{className:"ag-theme-material ".concat(o||""),style:{height:j,minHeight:"250px"},id:i,children:(0,h.jsx)(a.AgGridReact,(0,t.Z)((0,t.Z)({},S),{},{rowData:m,context:p},k))})}))},4335:function(e,n,i){i.r(n),i.d(n,{default:function(){return V}});var t=i(74165),r=i(1413),a=i(15861),l=i(29439),s=i(54753),o=i(16157),d=i(42669),c=i(62463),u=i(10383),h=i(91294),f=i(12119),x=i(81962),m=i(67598),p=i(51987),Z=i(32415),v=i(86360),j=i(39354),g=i(47313),y=i(45987),C=i(73477),w=i(91210),b=i(30183),S=i(25700),D=i(46417),k=(0,S.Z)((0,D.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),R=i(78871),N=["children"];function z(e){var n=e.children,i=(0,y.Z)(e,N);return(0,D.jsx)(C.Z,(0,r.Z)((0,r.Z)({},i),{},{fullWidth:!0,children:(0,D.jsx)(o.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:n})}))}var P=function(e){var n=e.selectedRow,i=e.viewRule,t=null===n||void 0===n?void 0:n.ruleId;return(0,D.jsxs)(c.Z,{direction:"column",justifyContent:"center",alignItems:"center",spacing:1,children:[(0,D.jsxs)(z,{color:"secondary",disabled:!t,onClick:i,children:[(0,D.jsx)(w.Z,{fontSize:"medium"}),"View"]}),(0,D.jsxs)(z,{color:"success",disabled:!t,children:[(0,D.jsx)(b.Z,{fontSize:"medium"}),"Activate"]}),(0,D.jsxs)(z,{color:"error",disabled:!t,children:[(0,D.jsx)(k,{fontSize:"medium"}),"Deactivate"]}),(0,D.jsxs)(z,{color:"error",disabled:!t,children:[(0,D.jsx)(R.Z,{fontSize:"medium"}),"Reject"]})]})},A=i(8586),I=i(18104),M=i(82937),B=i(59864),G=function(e){return e.data.colourIfDifferent.includes("RED")?(0,D.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:e.value}):e.value},T={rule:[{headerName:"Tag",field:"tag",pinned:"left",maxWidth:100,suppressMenu:!0,cellClass:function(){return["text-bold"]}},{headerName:"Description",field:"description",pinned:"left",maxWidth:300,cellClass:function(){return["text-bold"]}},{headerName:"Party A Deal Reference",field:"host",type:"rightAligned"},{headerName:"Party B Deal Reference",field:"counterParty.0"}],audit:[{headerName:"Message Id",field:"messageId"},{headerName:"Username",field:"userName"},{headerName:"Action",field:"action"},{headerName:"Description",field:"description"},{headerName:"Comment",field:"comment"},{headerName:"Date",field:"createDate"}],confirmation:[{headerName:"Tag",field:"tag",pinned:"left",maxWidth:100,suppressMenu:!0},{headerName:"Description",field:"description",pinned:"left",maxWidth:250},{headerName:"Host",field:"host",type:"rightAligned",cellRenderer:G},{headerName:"Counter Party",field:"counterParty.0",cellRenderer:G}]},H=["children","value","index"];function L(e){var n=e.children,i=e.value,t=e.index,a=(0,y.Z)(e,H);return(0,D.jsx)("div",(0,r.Z)((0,r.Z)({role:"tabpanel",hidden:i!==t,id:"tabpanel-".concat(t),"aria-labelledby":"tab-".concat(t)},a),{},{children:i===t&&(0,D.jsx)(o.Z,{sx:{p:0},children:(0,D.jsx)(d.Z,{children:n})})}))}var O=function(e){var n=e.setOpen,i=e.selectedRow,s=(0,g.useState)(0),u=(0,l.Z)(s,2),h=u[0],f=u[1],x=(0,g.useState)({loading:!0}),Z=(0,l.Z)(x,2),v=Z[0],y=Z[1],w=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,i,a,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([B.Z.get("/api/ucr-rules/rule",{params:{status:"rule"}}),B.Z.get("/api/ucr-rules/confirmation",{params:{status:"confirmation"}})]);case 2:n=e.sent,i=(0,l.Z)(n,2),a=i[0],s=i[1],y((function(e){var n,i,t,l;return(0,r.Z)((0,r.Z)({},e),{},{loading:!1,data:null===a||void 0===a?void 0:a.data,rule:(null===a||void 0===a||null===(n=a.value)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.ucrDrillDownList)||[],confirmation:(null===s||void 0===s||null===(t=s.value)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.listOfSwiftMessageDrillDown)||[]})}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){w()}),[]);var b=[{key:"rule",title:"Rule",headers:T.rule},{key:"audit",title:"Audit",headers:T.audit},{key:"confirmation",title:"Confirmation",headers:T.confirmation}];return(0,D.jsxs)(o.Z,{sx:{width:"75vw"},display:"flex",flexDirection:"column",children:[(0,D.jsxs)(o.Z,{display:"flex",flexDirection:"column",sx:{borderBottom:1,borderColor:"divider"},children:[(0,D.jsxs)(o.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{p:1},children:[(0,D.jsx)(d.Z,{variant:"h5",noWrap:!0,children:"Settlement rule"}),(0,D.jsx)(I.Z,{size:"small",onClick:function(){return n(!1)},children:(0,D.jsx)(A.Z,{})})]}),(0,D.jsx)(o.Z,{sx:{p:1,backgroundColor:"#fafafb"},children:(0,D.jsxs)(M.ZP,{container:!0,spacing:1,children:[(0,D.jsx)(M.ZP,{item:!0,xs:4,children:(0,D.jsxs)(c.Z,{spacing:.5,children:[(0,D.jsx)(d.Z,{color:"secondary",children:"Host"}),(0,D.jsx)(d.Z,{children:null===i||void 0===i?void 0:i.partyA})]})}),(0,D.jsx)(M.ZP,{item:!0,xs:4,children:(0,D.jsxs)(c.Z,{spacing:.5,children:[(0,D.jsx)(d.Z,{color:"secondary",children:"Client"}),(0,D.jsx)(d.Z,{children:null===i||void 0===i?void 0:i.partyB})]})}),(0,D.jsx)(M.ZP,{item:!0,xs:4,children:(0,D.jsxs)(c.Z,{spacing:.5,children:[(0,D.jsx)(d.Z,{color:"secondary",children:"Currency"}),(0,D.jsx)(d.Z,{children:null===i||void 0===i?void 0:i.currency})]})}),(0,D.jsx)(M.ZP,{item:!0,xs:4,children:(0,D.jsxs)(c.Z,{spacing:.5,children:[(0,D.jsx)(d.Z,{color:"secondary",children:"Host Deal Reference"}),(0,D.jsx)(d.Z,{children:null===i||void 0===i?void 0:i.partyAmessageId})]})}),(0,D.jsx)(M.ZP,{item:!0,xs:4,children:(0,D.jsxs)(c.Z,{spacing:.5,children:[(0,D.jsx)(d.Z,{color:"secondary",children:"Client Deal Reference"}),(0,D.jsx)(d.Z,{children:null===i||void 0===i?void 0:i.partyBmessageId})]})}),(0,D.jsx)(M.ZP,{item:!0,xs:4,children:(0,D.jsxs)(c.Z,{spacing:.5,children:[(0,D.jsx)(d.Z,{color:"secondary",children:"Paired by"}),(0,D.jsx)(d.Z,{children:null===i||void 0===i?void 0:i.updatedBy})]})}),(0,D.jsx)(M.ZP,{item:!0,xs:4,children:(0,D.jsxs)(c.Z,{spacing:.5,children:[(0,D.jsx)(d.Z,{color:"secondary",children:"Validated By"}),(0,D.jsx)(d.Z,{children:null===i||void 0===i?void 0:i.validatedBy})]})}),(0,D.jsx)(M.ZP,{item:!0,xs:4,children:(0,D.jsxs)(c.Z,{spacing:.5,children:[(0,D.jsx)(d.Z,{color:"secondary",children:"Buy/Sell Direction"}),(0,D.jsx)(d.Z,{children:null===i||void 0===i?void 0:i.buySellDirection})]})})]})}),(0,D.jsx)(m.Z,{value:h,onChange:function(e,n){return f(n)},children:b.map((function(e,n){return(0,D.jsx)(p.Z,{label:e.title},e.key)}))})]}),(0,D.jsx)(o.Z,{flexGrow:1,sx:{height:"calc(100vh - 325px)",overflowY:"auto"},children:b.map((function(e,n){return(0,D.jsx)(L,{value:h,index:n,children:(0,D.jsx)(j.Z,{gridOptions:{columnDefs:b[n].headers,defaultColDef:{autoHeight:!0}},rowData:v[e.key],isCondensed:!0,id:e.key,gridHeight:"calc(100vh - 325px)"})},e.key)}))}),(0,D.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:1,borderTop:1,borderColor:"divider"},children:[(0,D.jsx)(C.Z,{variant:"text",color:"secondary",onClick:function(){return n(!1)},children:"Close"}),(0,D.jsxs)(c.Z,{direction:"row",spacing:1,children:[(0,D.jsx)(C.Z,{variant:"contained",color:"success",onClick:function(){return n(!1)},children:"Activate"}),(0,D.jsx)(C.Z,{variant:"contained",color:"error",onClick:function(){return n(!1)},children:"Deactivate"}),(0,D.jsx)(C.Z,{variant:"outlined",color:"error",onClick:function(){return n(!1)},children:"Reject"})]})]})]})},V=function(){var e=(0,g.useState)(!1),n=(0,l.Z)(e,2),i=n[0],y=n[1],C=(0,g.useState)(0),w=(0,l.Z)(C,2),b=w[0],S=w[1],k=(0,g.useState)({}),R=(0,l.Z)(k,2),N=R[0],z=R[1],A=(0,g.useState)({loading:!0}),I=(0,l.Z)(A,2),M=I[0],G=I[1],T=(0,g.useRef)(),H=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,i,a,s,o,d,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([B.Z.get("/api/ucr-rules/all",{params:{status:"all"}}),B.Z.get("/api/ucr-rules/cp",{params:{status:"cp"}}),B.Z.get("/api/ucr-rules/ssi",{params:{status:"ssi"}}),B.Z.get("/api/ucr-rules/txt",{params:{status:"txt"}}),B.Z.get("/api/ucr-rules/ss",{params:{status:"ss"}})]);case 2:n=e.sent,i=(0,l.Z)(n,5),a=i[0],s=i[1],o=i[2],d=i[3],c=i[4],G((function(e){return(0,r.Z)((0,r.Z)({},e),{},{loading:!1,data:{all:a.value.data,ssi:o.value.data,cp:s.value.data,txt:d.value.data,ss:c.value.data}})}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){H()}),[]);var L=[{key:"all",title:"All"},{key:"ssi",title:"SSI"},{key:"cp",title:"Counter Party"},{key:"txt",title:"Text"},{key:"ss",title:"Settlement Source"}],V={columnDefs:[{headerName:"Rule Id",field:"ruleId"},{headerName:"Message Id",field:"partyAmessageId"},{headerName:"Party A",field:"partyA"},{headerName:"Party B",field:"partyB"},{headerName:"Tag",field:"tag"},{headerName:"Comment",field:"comment"},{headerName:"Rule Type",field:"ruleType"},{headerName:"Created by",field:"updatedBy"},{headerName:"Validated by",field:"validatedBy"},{headerName:"Created date",field:"createdDate"}],rowSelection:"single",onRowDoubleClicked:function(){y(!0)},onSelectionChanged:function(e){z(e.api.getSelectedRows()[0])}};return M.loading?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(o.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[(0,D.jsxs)(d.Z,{variant:"h4",sx:{mb:1},display:"flex",alignItems:"center",children:[(0,D.jsx)(s.Z,{fontSize:"medium",sx:{mr:1}})," User created rules"]}),(0,D.jsx)(c.Z,{spacing:1,direction:"row",alignItems:"center",children:(0,D.jsxs)(u.Z,{sx:{minWidth:250},size:"small",children:[(0,D.jsx)(h.Z,{id:"status",children:"Status"}),(0,D.jsxs)(f.Z,{label:"Status",labelId:"status",children:[(0,D.jsx)(x.Z,{value:"Rule Validated",selected:!0,children:"Rule Validated"}),(0,D.jsx)(x.Z,{value:"Pending for Validation",children:"Pending for Validation"}),(0,D.jsx)(x.Z,{value:"Rule Archived",children:"Rule Archived"})]})]})})]}),(0,D.jsx)(m.Z,{value:b,onChange:function(e,n){return S(n)},children:L.map((function(e,n){return(0,D.jsx)(p.Z,{label:e.title},e.key)}))}),(0,D.jsx)(Z.Z,{elevation:1,children:(0,D.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,D.jsx)(o.Z,{component:"main",sx:{flexGrow:1},children:(0,D.jsx)(j.Z,{gridOptions:V,rowData:M.data[L[b].key].userCreatedRulesList,isCondensed:!0,gridId:T,id:"ucr",gridHeight:"calc(100vh - 260px)"})}),(0,D.jsx)(o.Z,{component:"main",sx:{flexGrow:0,width:100,backgroundColor:"#f0f0f0",p:1},children:(0,D.jsx)(P,{selectedRow:N,viewRule:function(){return y((function(e){return!e}))}})})]})}),(0,D.jsx)(v.ZP,{anchor:"right",open:i,onClose:function(){return y((function(e){return!e}))},children:(0,D.jsx)(O,{setOpen:y,selectedRow:N})})]})}},30183:function(e,n,i){var t=i(25700),r=i(46417);n.Z=(0,t.Z)((0,r.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check")},8586:function(e,n,i){var t=i(25700),r=i(46417);n.Z=(0,t.Z)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},78871:function(e,n,i){var t=i(25700),r=i(46417);n.Z=(0,t.Z)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"DoNotDisturb")},91210:function(e,n,i){var t=i(25700),r=i(46417);n.Z=(0,t.Z)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility")}}]);